# BEMS 모니터링 시스템 설계 경험

## 초기 문제 상황

타사에서 하드웨어 센서 데이터를 수집하고, 협력업체 DB에서 실시간으로 데이터를 가져와서 적산 계산하는 방식으로 구현했습니다.

하지만 센서 데이터량이 예상보다 많아서 5분마다 수천 개의 센서 데이터가 쌓이고, 년 단위 데이터 조회 시 수천만 건이 넘어가면서 성능 문제가 발생했습니다.

## 구체적 문제점

- API 응답시간이 15초 이상 걸리는 상황 발생
- 메모리 사용량 급증으로 OS가 프로세스를 강제 종료하는 현상
- 실시간 조회 방식의 한계 노출

## 해결 방안

**데이터 특성에 따른 차별화 처리**:
- 온도, 습도 센서: 실시간 조회 방식 유지 (현재 상태만 필요)
- 에너지 사용량: 적산 데이터이므로 별도 처리 필요

**집계 테이블 설계 및 배치 처리**:
- 집계 테이블을 별도로 설계
- 배치 시스템을 통해 청크 기반 방식으로 데이터를 미리 적재
- 적산된 값을 기준으로 조회하도록 시스템 개선

## 핵심 개선점

실시간 계산에서 사전 집계 방식으로 전환하여 성능 문제를 근본적으로 해결했습니다.